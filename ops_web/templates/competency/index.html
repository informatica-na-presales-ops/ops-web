{% extends 'one-up.html' %}

{% block title %}Competency / {{ super() }}{% endblock %}

{% block main_content %}
    <div class="row pt-3 text-light">
        <div class="col">
            <h1>Competency</h1>
        </div>
    </div>

    {% if 'admin' in g.permissions %}
    <div class="row pt-3 text-light">
        <div class="col">
            <a class="btn btn-outline-light" href="{{ url_for('competency_tracks') }}">Manage tracks</a>
        </div>
    </div>
    {% endif %}

    {% if g.employees %}
    <div class="row pt-3 text-light">
        <div class="col">
            <h2>Your employees</h2>
        </div>
    </div>

    <div class="row pt-3 text-light">
        <div class="col">
            <table class="table table-dark table-striped table-hover table-responsive table-sm">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Job title</th>
                    <th>Track</th>
                </tr>
                </thead>
                <tbody>
                {% for e in g.employees | sort(attribute='employee_name') %}
                    <tr role="button" data-href="{{ url_for('competency_scoring_employee', employee_id=e.employee_id) }}">
                        <td>{{ e.employee_id }}</td>
                        <td>{{ e.employee_name }}</td>
                        <td>{{ e.employee_email }}</td>
                        <td>{{ e.job_title }}</td>
                        <td>{{ e.track_name if e.track_name }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <div class="row pt-3 text-light">
        <div class="col">
            <p class="lead">You do not manage any employees.</p>
        </div>
    </div>
    {% endif %}
{% endblock %}

{% block end_of_body %}
    {{ super() }}
    <script src="{{ url_for('static', filename='data-href-clickable.js') }}"></script>
{% endblock %}
